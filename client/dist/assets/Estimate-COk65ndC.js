import{u as v,r as i,j as e,m as y}from"./vendor-D2owFAG-.js";import{u as w}from"./index-DliKwqLO.js";import"./vendor-visuals-gZFlGGSH.js";const q=()=>{const{api:h}=w(),u=v(),[n,o]=i.useState(!1),[c,m]=i.useState(""),[a,p]=i.useState({city:"Chennai",quality:"standard",floors:2,area_sqft:"",rooms:"",wall_length:"",carpet_ratio:.72,is_commercial:!1}),[d,x]=i.useState(null),l=t=>{const{name:r,value:s,type:f,checked:g}=t.target;p(N=>({...N,[r]:f==="checkbox"?g:s}))},b=t=>{x(t.target.files[0])},j=async t=>{t.preventDefault(),o(!0),m("");const r=new FormData;Object.keys(a).forEach(s=>{a[s]!==""&&r.append(s,a[s])}),d&&r.append("blueprint",d);try{const s=await h.post("/data/estimate",r,{headers:{"Content-Type":"multipart/form-data"}});u(`/result/${s.data.id}`)}catch(s){m(s.response?.data?.msg||"Estimation failed. Please check your inputs and try again."),o(!1)}};return e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"row justify-content-center mb-5",children:e.jsx("div",{className:"col-12 col-lg-8",children:e.jsxs("div",{className:"card glass-card shadow-lg border-0 rounded-4",children:[e.jsxs("div",{className:"card-header border-0 pt-4 px-5 bg-transparent",children:[e.jsx("h3",{className:"fw-bold text-white",children:"New Construction Estimate"}),e.jsx("p",{className:"text-muted",children:"Fill in the details below to get a precise cost estimation."})]}),e.jsxs("div",{className:"card-body px-5 pb-5",children:[c&&e.jsx("div",{className:"alert alert-danger glass-card border-danger",children:c}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label text-white",children:"City"}),e.jsxs("select",{name:"city",className:"form-select glass-input",value:a.city,onChange:l,children:[e.jsx("option",{value:"Chennai",children:"Chennai"}),e.jsx("option",{value:"Bengaluru",children:"Bengaluru"}),e.jsx("option",{value:"Coimbatore",children:"Coimbatore"}),e.jsx("option",{value:"Mumbai",children:"Mumbai"}),e.jsx("option",{value:"Delhi",children:"Delhi"}),e.jsx("option",{value:"Hyderabad",children:"Hyderabad"}),e.jsx("option",{value:"Ahmedabad",children:"Ahmedabad"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label text-white",children:"Quality Grade"}),e.jsxs("select",{name:"quality",className:"form-select glass-input",value:a.quality,onChange:l,children:[e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"premium",children:"Premium"})]})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label text-white",children:"Floors"}),e.jsx("input",{type:"number",name:"floors",className:"form-control glass-input",value:a.floors,onChange:l,required:!0})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label text-white",children:"Carpet Ratio"}),e.jsx("input",{type:"number",step:"0.01",name:"carpet_ratio",className:"form-control glass-input",value:a.carpet_ratio,onChange:l})]}),e.jsx("div",{className:"col-md-4 d-flex align-items-center mt-4 pt-2",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",name:"is_commercial",checked:a.is_commercial,onChange:l}),e.jsx("label",{className:"form-check-label text-white",children:"Is Commercial?"})]})}),e.jsx("h5",{className:"mt-4 border-bottom border-secondary pb-2 text-white",children:"Manual Overrides"}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label text-white",children:"Area (sqft)"}),e.jsx("input",{type:"number",name:"area_sqft",className:"form-control glass-input",value:a.area_sqft,onChange:l,placeholder:"Optional"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label text-white",children:"Rooms"}),e.jsx("input",{type:"number",name:"rooms",className:"form-control glass-input",value:a.rooms,onChange:l,placeholder:"Optional"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label text-white",children:"Wall Length (ft)"}),e.jsx("input",{type:"number",name:"wall_length",className:"form-control glass-input",value:a.wall_length,onChange:l,placeholder:"Optional"})]}),e.jsxs("div",{className:"col-12 mt-3",children:[e.jsx("label",{className:"form-label fw-bold text-white",children:"Upload Blueprint Image (Auto-Extraction)"}),e.jsx("input",{type:"file",className:"form-control glass-input",accept:"image/*",onChange:b}),e.jsx("small",{className:"text-muted",children:"If uploaded, we will try to estimate area and rooms automatically."})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 py-3 mt-4 fw-bold shadow-lg",disabled:n,children:n?"Calculating...":"Generate Estimate"})]})]})]})})})};export{q as default};
